<!DOCTYPE html>
<html>
    <style>
       .slidex  {
    writing-mode: bt-lr; /* IE */
    -webkit-appearance: slider-vertical; /* WebKit */
    width: 8px;
    height: 175px;
    padding: 0 5px;
}
    </style>

<script src="/socket.io/socket.io.js"></script>
    <body>
    <p id="errors" style="color: red;"></p>
    <p id="success" style="color: chartreuse;"></p>
        <input class="slidex" type="range" min="0" max="255" class="slider" id="previewSlider">
        <p id="channelsPreview"></p>
        <p id="titlePreview" style="font-weight: bold;"></p>
        <p id="valuePreview"></p>
        <div id="sliders">
            <!-- <input id="min" placeholder="min" value="0"> -->
            <!-- <input id="max" placeholder="max" value="255"> -->
            <input id="channels" placeholder="channels 1-512" value="">
            <input id="title" placeholder="title" value="">
        </div>
        <button id="newS" onclick="addSlider();">New Slider</button>

        
        <script>
            var socket = io();
            var erres = false
            function preview(){
                //const min = document.getElementById('min').textContent;
                // const max = document.getElementById('max').textContent;
                var channels = document.getElementById('channels').value;
                
                        var num = channels.split(' ');
                        channels = num;
                        for(i=0; i<channels.length; i++){
                            channels[i] = parseInt(channels[i])
                            if (channels[i] >512){channels[i] = 512}
                        }
                        
                
                
                
                var title = document.getElementById('title').value.toString();
                var val = document.getElementById('previewSlider').value;
             //document.getElementById('previewSlider').min = min
             //document.getElementById('previewSlider').max = max
             document.getElementById('channelsPreview').innerHTML = channels
             document.getElementById('titlePreview').innerHTML = title
             document.getElementById('valuePreview').innerHTML = val

                
            }

            setInterval(preview, 1)
            socket.on('id', (id)=>{
                const idn = id;
                socket.emit('estMK', idn);
            });
            function addSlider(){
                
                var slide = [title.value, channels.value, 0];
                console.log(slide);
                socket.emit('newSlider', (slide))
                
            }
            
        </script>
        
    </body>
</html>